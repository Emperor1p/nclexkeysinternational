# Registration Codes Guide

## üîë **Registration Codes Overview**

Registration codes are unique codes that students must enter during registration after making payment. These codes are generated by admins and distributed to students who have completed payment.

## üìç **Where to Find Registration Codes**

### **1. Database (Admin Access)**
- **Location**: AWS RDS PostgreSQL database
- **Table**: `registration_codes_registrationcode`
- **Access**: Through Django admin or direct database query

### **2. Django Admin Interface**
- **URL**: `http://ec2-34-206-167-168.compute-1.amazonaws.com:8000/admin/`
- **Login**: Use admin credentials
- **Navigate**: Registration Codes ‚Üí Registration codes

### **3. API Endpoints**
- **List Codes**: `GET /api/registration-codes/codes/` (Admin only)
- **Create Codes**: `POST /api/registration-codes/codes/` (Admin only)
- **Generate Codes**: `POST /api/registration-codes/generate/` (Admin only)

## üöÄ **How to Create Registration Codes**

### **Method 1: Using the Script**
```bash
# Connect to your EC2 instance
ssh -i nclexkeyspair.pem ubuntu@ec2-34-206-167-168.compute-1.amazonaws.com

# Navigate to backend directory
cd /home/ubuntu/nclexkey/backend

# Activate virtual environment
source venv/bin/activate

# Run the registration code generator
python create_registration_codes.py --generate
```

### **Method 2: Using Django Admin**
1. Go to `http://ec2-34-206-167-168.compute-1.amazonaws.com:8000/admin/`
2. Login with admin credentials
3. Navigate to "Registration codes"
4. Click "Add Registration code"
5. Fill in the form and save

### **Method 3: Using API (Programmatic)**
```bash
# Generate codes via API
curl -X POST http://ec2-34-206-167-168.compute-1.amazonaws.com:8000/api/registration-codes/generate/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -d '{
    "program_type": "NIGERIA",
    "quantity": 10
  }'
```

## üìã **Registration Code Structure**

### **Code Format**
- **Pattern**: `NCLEX-{PROGRAM}-{RANDOM}`
- **Example**: `NCLEX-NIG-ABC12345`
- **Length**: 8-12 characters
- **Uniqueness**: Each code is unique across the system

### **Program Types**
- **NIGERIA**: Nigeria Program
- **AFRICAN**: African Program  
- **USA/CANADA**: USA/Canada Program
- **EUROPE**: Europe Program

## üîß **Registration Code Management**

### **View Existing Codes**
```bash
# Show all existing codes
python create_registration_codes.py --show
```

### **Code Status**
- **‚úÖ Available**: Code can be used for registration
- **‚ùå Used**: Code has been used and cannot be reused
- **‚è∞ Expired**: Code has expired (if expiration is implemented)

### **Code Usage Tracking**
- **Used By**: Shows which user used the code
- **Used At**: Timestamp when code was used
- **Created At**: When the code was generated

## üë• **How Students Use Registration Codes**

### **Registration Process**
1. Student visits registration page
2. Selects "Yes, I have paid" 
3. Enters their registration code
4. System validates the code
5. If valid, registration proceeds
6. Code is marked as used

### **Code Validation**
- **Real-time**: Codes are validated during registration
- **One-time use**: Each code can only be used once
- **Program-specific**: Codes are tied to specific programs

## üõ†Ô∏è **Admin Functions**

### **Generate Codes in Bulk**
```python
# Generate 20 codes for Nigeria program
python manage.py generate_codes --program nigeria --count 20
```

### **View Code Statistics**
- Total codes generated
- Codes used vs available
- Usage by program type
- Recent activity

## üìä **Code Distribution**

### **For Nigeria Program**
```
NCLEX-NIG-ABC12345
NCLEX-NIG-DEF67890
NCLEX-NIG-GHI11111
```

### **For African Program**
```
NCLEX-AFR-ABC12345
NCLEX-AFR-DEF67890
NCLEX-AFR-GHI11111
```

### **For USA/Canada Program**
```
NCLEX-USA-ABC12345
NCLEX-USA-DEF67890
NCLEX-USA-GHI11111
```

### **For Europe Program**
```
NCLEX-EUR-ABC12345
NCLEX-EUR-DEF67890
NCLEX-EUR-GHI11111
```

## üîí **Security Features**

- **Unique Codes**: Each code is unique and cannot be duplicated
- **One-time Use**: Codes become invalid after first use
- **Program Binding**: Codes are tied to specific programs
- **Admin Control**: Only admins can generate and manage codes
- **Usage Tracking**: Full audit trail of code usage

## üì± **Integration with WhatsApp**

When students click "Enroll Now" on courses, they're redirected to WhatsApp with a message like:
```
Hi! I'm interested in enrolling in the Nigeria program (NGN 30,000). 
Please provide me with payment details and registration code.
```

Admins can then:
1. Process payment
2. Generate a registration code
3. Send the code via WhatsApp
4. Student uses code to register

## üéØ **Best Practices**

1. **Generate codes in batches** for efficiency
2. **Keep track of code distribution** to students
3. **Monitor code usage** to prevent abuse
4. **Expire unused codes** after a reasonable time
5. **Maintain code security** - don't share publicly

## üö® **Troubleshooting**

### **Code Not Working**
- Check if code exists in database
- Verify code hasn't been used already
- Ensure code matches the program type
- Check for typos in code entry

### **Cannot Generate Codes**
- Ensure you're logged in as admin
- Check database connection
- Verify registration_codes app is installed
- Check for any error messages

## üìû **Support**

If you need help with registration codes:
1. Check the Django admin interface
2. Review the database directly
3. Check the application logs
4. Contact system administrator
